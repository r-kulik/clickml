import json
import sys
import time

import requests
from APICONFIG import site_host
from JsTask import APILearnTask


def complete_exploit_task(task_id: int) -> int:
    time.sleep(10)
    response = requests.post(
        url=f'http://{site_host}/complete_exploit_task_and_get_files',
        headers={
            'taskid': str(task_id)
        },
        files={
            'file': open(f"task_{task_id}/best.csv", 'rb')
        }
    )
    if response.status_code != 200:
        print('response code is not 200')
        return -1
    return 0